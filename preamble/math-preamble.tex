% optimization
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

% various delimiters / bracketing operations
\DeclarePairedDelimiter\parentheses{\lparen}{\rparen}
\DeclarePairedDelimiter\brackets{\lbrack}{\rbrack}
\DeclarePairedDelimiter\set{\{}{\}}
\DeclarePairedDelimiterX{\norm}[1]{\lVert}{\rVert}{#1}
\DeclarePairedDelimiterX{\abs}[1]{\lvert}{\rvert}{#1}
\newcommand{\spn}[1]{\text{span}\parentheses*{#1}}

% expectation bracketing
\DeclarePairedDelimiterX{\expectarg}[1]{[}{]}{%
    \ifnum\currentgrouptype=16 \else\begingroup\fi
    \activatebar#1
    \ifnum\currentgrouptype=16 \else\endgroup\fi
}

% variance bracketing
\DeclarePairedDelimiterX{\variancearg}[1]{(}{)}{%
    \ifnum\currentgrouptype=16 \else\begingroup\fi
    \activatebar#1
    \ifnum\currentgrouptype=16 \else\endgroup\fi
}

% conditional bar conditional expectation / variance
\newcommand{\innermid}{\nonscript\;\delimsize\vert\nonscript\;}
\newcommand{\activatebar}{%
    \begingroup\lccode`\~=`\|
    \lowercase{\endgroup\let~}\innermid
    \mathcode`|=\string"8000
}

% probability
\newcommand{\Prob}{P \, \variancearg}
\newcommand{\E}{\mathbb{E} \, \expectarg}
\newcommand{\Var}{\operatorname{Var}\variancearg}
\newcommand{\Cov}{\operatorname{Cov}\variancearg}
\newcommand\independent{\protect\mathpalette{\protect\independenT}{\perp}}

% indicator function
\def\mOne{{\mathbbm{1}}}
\newcommand{\ind}[1]{\mOne_{\{#1\}}}
\newcommand{\indc}[1]{\mOne_{\{#1\}^c}}

% linear algebra
\newcommand{\Reals}[1]{\mathbb{R}^{#1}}

% dataset
\newcommand{\dataset}{\mathcal{D}_n}
